<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Kakao Login</title>
    <link rel="stylesheet" type="text/css" href="../css/kakaoLogin.css">
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script>
        // 카카오 SDK 초기화
        Kakao.init('e286df7511b332b5d132d450cdc4cfc6'); // 발급받은 JavaScript 키

        function loginWithKakao() {
            Kakao.Auth.login({
                success: function (authObj) {
                    // 인증 성공 시 백엔드로 인증 코드 전송
                    fetch('http://localhost:8080/auth/kakao/callback', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ code: authObj.access_token })
                    })
                        .then(response => response.json())
                        .then(data => {
                            console.log(data);
                            // 로그인 성공 후 처리
                        })
                        .catch(error => console.error('Error:', error));
                },
                fail: function (err) {
                    console.error(err);
                }
            });
        }
    </script>
</head>
<body>
<div class="container">
    <h1>우리랑 아기랑</h1>
    <h2>Baby With Us</h2>
    <form>
        <button type="button" id="kakao-login-btn" onclick="loginWithKakao()">Login with Kakao</button>
    </form>
</div>
</body>
</html>
